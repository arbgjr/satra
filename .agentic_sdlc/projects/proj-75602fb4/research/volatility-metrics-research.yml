volatility_research:
  topic: "M√©tricas de Volatilidade para Sistema de Alertas B3"
  date: "2026-01-17"
  researcher: "domain-researcher"

  executive_summary: |
    Pesquisa sobre m√©tricas de volatilidade para sistema de alertas em tempo real
    para ativos da B3. Foram analisadas 6 m√©tricas principais considerando facilidade
    de c√°lculo, utilidade para traders, custo computacional e disponibilidade de dados
    gratuitos. ATR e Desvio Padr√£o Hist√≥rico s√£o recomendados para tier gratuito por
    simplicidade e baixo custo computacional. Bollinger Bands e Beta s√£o recomendados
    para tier premium por fornecerem insights mais sofisticados.

  metrics_analyzed:
    - name: "ATR (Average True Range)"
      description: |
        Indicador de volatilidade desenvolvido por J. Welles Wilder que mede o
        range m√©dio entre m√°ximas e m√≠nimas em um per√≠odo (tipicamente 14 per√≠odos).
        C√°lculo: TR = max(high-low, |high-prev_close|, |low-prev_close|)
        ATR = m√©dia m√≥vel suavizada (SMMA) de TR.

      pros:
        - "Simples de calcular com dados OHLC (Open, High, Low, Close)"
        - "Fornece valor num√©rico absoluto de volatilidade (ex: R$ 7.20)"
        - "Ideal para definir stop-loss din√¢micos baseados em volatilidade"
        - "N√£o requer dados de op√ß√µes ou √≠ndices de mercado"
        - "Aplic√°vel a qualquer timeframe (intraday, di√°rio, semanal)"
        - "Amplamente usado em 2026 para gest√£o de risco"

      cons:
        - "N√£o indica dire√ß√£o de tend√™ncia, apenas magnitude de volatilidade"
        - "Pode gerar falsos sinais em mercados de baixa liquidez"
        - "Valores absolutos podem dificultar compara√ß√£o entre ativos de pre√ßos diferentes"

      complexity: low
      data_requirements: "Apenas dados OHLC hist√≥ricos (dispon√≠vel gratuitamente)"
      computation_cost: low
      user_friendliness: high
      recommended_for: ["free_tier", "premium"]

      calculation_example: |
        Para PETR4 em 17/01/2026:
        - High: R$ 42.50, Low: R$ 41.80, Prev Close: R$ 42.00
        - TR = max(42.50-41.80=0.70, |42.50-42.00|=0.50, |41.80-42.00|=0.20) = 0.70
        - ATR(14) = m√©dia m√≥vel dos √∫ltimos 14 TRs

      sources:
        - title: "The Average True Range Indicator and Volatility"
          url: "https://www.schwab.com/learn/story/average-true-range-indicator-and-volatility"
          type: "authoritative"
        - title: "Average True Range (ATR)"
          url: "https://www.fidelity.com/learning-center/trading-investing/technical-analysis/technical-indicator-guide/atr"
          type: "official"

    - name: "Bollinger Bands"
      description: |
        Desenvolvido por John Bollinger nos anos 1980, consiste em 3 bandas:
        banda m√©dia (SMA 20 per√≠odos), banda superior (+2 desvios padr√£o) e
        banda inferior (-2 desvios padr√£o). As bandas se expandem em alta volatilidade
        e contraem em baixa volatilidade.

      pros:
        - "Visualiza√ß√£o intuitiva de volatilidade no gr√°fico de pre√ßos"
        - "Identifica per√≠odos de contra√ß√£o (squeeze) que antecedem movimentos fortes"
        - "√ötil para estrat√©gias de revers√£o √† m√©dia e breakouts"
        - "Combina tend√™ncia e volatilidade em um √∫nico indicador"
        - "Adequado para day trading em timeframes 15min-1h"

      cons:
        - "Mais complexo de calcular que ATR (requer desvio padr√£o)"
        - "Requer escolha de par√¢metros (per√≠odo SMA e multiplicador œÉ)"
        - "Pode gerar sinais falsos em mercados laterais"
        - "Necessita de visualiza√ß√£o gr√°fica para melhor interpreta√ß√£o"

      complexity: medium
      data_requirements: "Dados OHLC hist√≥ricos + c√°lculo de desvio padr√£o"
      computation_cost: medium
      user_friendliness: high
      recommended_for: ["premium"]

      calculation_example: |
        Bollinger Bands (20, 2):
        - Banda M√©dia = SMA(20) de pre√ßos de fechamento
        - Desvio Padr√£o (œÉ) = raiz quadrada da vari√¢ncia dos √∫ltimos 20 fechamentos
        - Banda Superior = SMA(20) + (2 √ó œÉ)
        - Banda Inferior = SMA(20) - (2 √ó œÉ)

        Interpreta√ß√£o:
        - Bandas estreitas ‚Üí baixa volatilidade ‚Üí potencial breakout
        - Bandas largas ‚Üí alta volatilidade ‚Üí potencial revers√£o

      sources:
        - title: "Bollinger Bands: What They Are and How to Use Them"
          url: "https://www.schwab.com/learn/story/bollinger-bands-what-they-are-and-how-to-use-them"
          type: "authoritative"
        - title: "Bollinger Band Squeeze"
          url: "https://chartschool.stockcharts.com/table-of-contents/trading-strategies-and-models/trading-strategies/bollinger-band-squeeze"
          type: "reference"

    - name: "Desvio Padr√£o Hist√≥rico (Historical Standard Deviation)"
      description: |
        Medida estat√≠stica de dispers√£o dos retornos de um ativo em rela√ß√£o √† sua m√©dia.
        Representa a volatilidade hist√≥rica realizada. Quanto maior o desvio padr√£o,
        maior a varia√ß√£o de pre√ßos observada no per√≠odo.

      pros:
        - "M√©trica estat√≠stica padr√£o, amplamente compreendida"
        - "Dispon√≠vel oficialmente na B3 (Desvio-Padr√£o dos Ativos)"
        - "Base para c√°lculo de Bollinger Bands e outras m√©tricas"
        - "Adequado para compara√ß√£o de volatilidade entre diferentes ativos"
        - "F√°cil de anualizar para an√°lises de longo prazo"

      cons:
        - "Assume distribui√ß√£o normal de retornos (pode n√£o ser realista)"
        - "Sens√≠vel a outliers (eventos extremos distorcem a m√©trica)"
        - "N√£o captura assimetria de movimentos (upside vs downside)"
        - "Requer hist√≥rico suficiente de dados (m√≠nimo 30 per√≠odos)"

      complexity: low
      data_requirements: "Hist√≥rico de pre√ßos de fechamento"
      computation_cost: low
      user_friendliness: high
      recommended_for: ["free_tier", "premium"]

      calculation_example: |
        Desvio Padr√£o de 30 dias:
        1. Calcular retornos di√°rios: r(t) = ln(P(t) / P(t-1))
        2. Calcular m√©dia dos retornos: Œº = (Œ£r) / n
        3. Calcular vari√¢ncia: œÉ¬≤ = Œ£(r - Œº)¬≤ / (n-1)
        4. Desvio padr√£o: œÉ = ‚àöœÉ¬≤
        5. Anualizar: œÉ_anual = œÉ_di√°rio √ó ‚àö252 (dias √∫teis/ano)

      sources:
        - title: "Desvio-Padr√£o | B3"
          url: "https://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-a-vista/volatilidades-dos-ativos/desvio-padrao/"
          type: "official"
        - title: "Avaliando a Volatilidade Di√°ria dos Ativos"
          url: "https://www.bcb.gov.br/pec/wps/port/wps297.pdf"
          type: "academic"

    - name: "Volatilidade Impl√≠cita (Implied Volatility)"
      description: |
        Volatilidade futura esperada pelo mercado, derivada dos pre√ßos de op√ß√µes
        usando o modelo Black-Scholes. Representa a expectativa do mercado sobre
        oscila√ß√µes futuras do ativo subjacente.

      pros:
        - "Forward-looking (olha para o futuro, n√£o apenas hist√≥rico)"
        - "Reflete expectativas do mercado sobre eventos futuros"
        - "√ötil para identificar op√ß√µes sobre/subprecificadas"
        - "Indicador de sentimento de mercado (medo/gan√¢ncia)"

      cons:
        - "REQUER dados de op√ß√µes (n√£o dispon√≠vel gratuitamente para todos ativos)"
        - "Complexo de calcular (modelo Black-Scholes iterativo)"
        - "Nem todos os ativos da B3 t√™m op√ß√µes l√≠quidas"
        - "Alto custo computacional para c√°lculo em tempo real"
        - "Depende de premissas do modelo (taxa livre de risco, etc.)"

      complexity: high
      data_requirements: "Pre√ßos de op√ß√µes, taxa livre de risco, tempo at√© vencimento, strike"
      computation_cost: high
      user_friendliness: low
      recommended_for: ["premium"]

      calculation_example: |
        Modelo Black-Scholes (simplificado):
        C = S √ó N(d1) - K √ó e^(-r√óT) √ó N(d2)

        Onde:
        - C = pre√ßo da call option (observado no mercado)
        - S = pre√ßo spot do ativo
        - K = strike price
        - r = taxa livre de risco
        - T = tempo at√© vencimento
        - N(d) = distribui√ß√£o normal cumulativa

        Volatilidade Impl√≠cita (œÉ) √© resolvida iterativamente at√© que
        o pre√ßo te√≥rico C iguale o pre√ßo de mercado observado.

      notes: |
        Para tier gratuito, volatilidade impl√≠cita √© INVI√ÅVEL devido a:
        1. Dados de op√ß√µes n√£o dispon√≠veis em APIs gratuitas
        2. Alta complexidade computacional
        3. Necessidade de dados auxiliares (taxa de juros, etc.)

      sources:
        - title: "Compreendendo volatilidade impl√≠cita no mercado de op√ß√µes"
          url: "https://opcoespro.com.br/blog/entendendo-a-volatilidade-implicita-no-mercado-de-opcoes"
          type: "educational"
        - title: "Volatilidade Impl√≠cita - Op√ß√µes"
          url: "https://ajuda.nelogica.com.br/hc/pt-br/articles/11622763233563-Volatilidade-Impl√≠cita-Op√ß√µes"
          type: "reference"

    - name: "Beta (Œ≤)"
      description: |
        Medida de risco sistem√°tico que compara a volatilidade de um ativo em rela√ß√£o
        ao mercado (normalmente Ibovespa). Indica quanto o ativo se move quando o
        mercado se move 1%.
        F√≥rmula: Œ≤ = Cov(R_ativo, R_mercado) / Var(R_mercado)

      pros:
        - "Contextualiza volatilidade em rela√ß√£o ao mercado"
        - "√ötil para diversifica√ß√£o de portf√≥lio"
        - "Identifica ativos defensivos (Œ≤<1) vs agressivos (Œ≤>1)"
        - "Componente do CAPM para c√°lculo de retorno esperado"

      cons:
        - "Requer dados do √≠ndice de mercado (Ibovespa)"
        - "Assume correla√ß√£o linear com mercado (pode n√£o ser realista)"
        - "Menos √∫til para day traders (foco √© relativo, n√£o absoluto)"
        - "Beta varia ao longo do tempo, requer rec√°lculo peri√≥dico"
        - "N√£o √∫til para alertas de volatilidade intraday"

      complexity: medium
      data_requirements: "Hist√≥rico do ativo + hist√≥rico do Ibovespa"
      computation_cost: medium
      user_friendliness: medium
      recommended_for: ["premium"]

      calculation_example: |
        Beta de PETR4 vs Ibovespa (60 dias):
        1. Calcular retornos di√°rios de PETR4 e Ibovespa
        2. Calcular covari√¢ncia: Cov(R_PETR4, R_IBOV)
        3. Calcular vari√¢ncia: Var(R_IBOV)
        4. Œ≤ = Cov / Var

        Interpreta√ß√£o:
        - Œ≤ = 1.5 ‚Üí Se Ibovespa sobe 1%, PETR4 tende a subir 1.5%
        - Œ≤ = 0.5 ‚Üí Se Ibovespa sobe 1%, ativo sobe apenas 0.5%
        - Œ≤ < 0 ‚Üí Correla√ß√£o negativa (raro, ex: ouro em crises)

      notes: |
        Beta √© mais relevante para swing traders e investidores de longo prazo.
        Para day traders focados em volatilidade intraday, ATR e Bollinger Bands
        s√£o m√©tricas mais acion√°veis.

      sources:
        - title: "Beta Coefficient - Definition, Formula, Calculation"
          url: "https://corporatefinanceinstitute.com/resources/data-science/beta-coefficient/"
          type: "authoritative"
        - title: "What is Beta in Finance?"
          url: "https://corporatefinanceinstitute.com/resources/valuation/what-is-beta-guide/"
          type: "educational"

    - name: "VIX-like Index (√çndice de Volatilidade)"
      description: |
        √çndice que mede a volatilidade impl√≠cita esperada do mercado, similar ao
        VIX americano. No Brasil, existe o IVol-BR (√çndice de Volatilidade Brasil)
        calculado pela B3 baseado em op√ß√µes do Ibovespa.

      pros:
        - "Medida de sentimento de mercado ('√≠ndice do medo')"
        - "√ötil para timing de mercado (alta volatilidade ‚Üí oportunidades)"
        - "Dispon√≠vel como √≠ndice pronto da B3"

      cons:
        - "Espec√≠fico para o mercado como um todo, n√£o ativos individuais"
        - "N√£o aplic√°vel para alertas de a√ß√µes individuais"
        - "Menos √∫til para traders focados em ativos espec√≠ficos"
        - "Dados podem n√£o estar dispon√≠veis em APIs gratuitas"

      complexity: high
      data_requirements: "√çndice IVol-BR da B3 ou c√°lculo baseado em op√ß√µes"
      computation_cost: high
      user_friendliness: medium
      recommended_for: []

      notes: |
        Para um sistema de alertas de ativos individuais da B3, um VIX-like index
        n√£o √© apropriado. √â mais relevante como indicador de mercado macro.
        N√ÉO RECOMENDADO para este projeto espec√≠fico.

      sources:
        - title: "Hist√≥rico de volatilidade impl√≠cita das op√ß√µes B3"
          url: "https://opcoes.net.br/historico/volatilidade-implicita"
          type: "reference"

  recommendations:
    free_tier:
      primary_metric: "ATR (Average True Range) - 14 per√≠odos"
      rationale: |
        ATR √© a escolha ideal para tier gratuito por 4 raz√µes principais:

        1. SIMPLICIDADE: C√°lculo direto usando apenas dados OHLC, sem depend√™ncias
           externas como op√ß√µes ou √≠ndices de mercado.

        2. DADOS GRATUITOS: Todas as APIs gratuitas (Alpha Vantage, BrAPI, Twelve Data)
           fornecem dados OHLC necess√°rios para c√°lculo de ATR.

        3. ACION√ÅVEL: Fornece valor num√©rico claro (ex: "PETR4 volatilidade de R$ 0.85/dia")
           que usu√°rios podem usar diretamente para definir stop-loss e sizing de posi√ß√£o.

        4. BAIXO CUSTO COMPUTACIONAL: Processamento leve, adequado para c√°lculo em tempo
           real de centenas de ativos simultaneamente.

      secondary_metric: "Desvio Padr√£o Hist√≥rico - 30 dias"
      secondary_rationale: |
        Como m√©trica complementar, o desvio padr√£o hist√≥rico oferece:
        - Comparabilidade entre ativos (pode ser normalizado como %)
        - Dados oficiais dispon√≠veis na B3
        - Base estat√≠stica s√≥lida e amplamente compreendida
        - Pode ser anualizado para contexto de longo prazo

      alert_strategy: |
        Para tier gratuito, implementar alertas baseados em:

        **Alerta de Alta Volatilidade:**
        - Trigger: ATR atual > 150% da m√©dia de ATR dos √∫ltimos 20 dias
        - Exemplo: "PETR4: Volatilidade elevada (ATR R$ 1.20 vs m√©dia R$ 0.80)"

        **Alerta de Contra√ß√£o de Volatilidade:**
        - Trigger: ATR atual < 50% da m√©dia de ATR dos √∫ltimos 20 dias
        - Exemplo: "VALE3: Baixa volatilidade (ATR R$ 0.40 vs m√©dia R$ 0.85) - potencial breakout"

    premium_tier:
      metrics:
        - name: "ATR (Advanced)"
          features:
            - "ATR em m√∫ltiplos timeframes (5min, 15min, 1h, di√°rio)"
            - "ATR percentual (ATRP) para compara√ß√£o entre ativos"
            - "Hist√≥rico de 1 ano de ATR para an√°lise de tend√™ncias"

        - name: "Bollinger Bands"
          features:
            - "Bollinger Bands com par√¢metros customiz√°veis"
            - "Detec√ß√£o autom√°tica de Bollinger Squeeze"
            - "Alertas de breakout acima/abaixo das bandas"
            - "Bollinger %B (posi√ß√£o relativa do pre√ßo nas bandas)"

        - name: "Beta vs Ibovespa"
          features:
            - "Beta rolling de 30, 60 e 90 dias"
            - "Compara√ß√£o de Beta entre setores"
            - "Identifica√ß√£o de ativos defensivos/agressivos"

        - name: "Desvio Padr√£o Avan√ßado"
          features:
            - "Desvio padr√£o realizado vs projetado"
            - "Compara√ß√£o de volatilidade hist√≥rica entre per√≠odos"
            - "Rank de volatilidade (percentil hist√≥rico)"

      rationale: |
        Para usu√°rios premium, oferecer m√©tricas mais sofisticadas que fornecem:

        1. CONTEXTO ADICIONAL: Bollinger Bands + ATR combinados identificam
           squeeze + for√ßa de breakout.

        2. AN√ÅLISE COMPARATIVA: Beta permite comparar volatilidade relativa
           ao mercado e entre setores.

        3. CUSTOMIZA√á√ÉO: Par√¢metros ajust√°veis para diferentes estilos de trading
           (scalper, day trader, swing trader).

        4. M√öLTIPLOS TIMEFRAMES: An√°lise de volatilidade em diferentes horizontes
           temporais simultaneamente.

      alert_strategy: |
        Para tier premium, alertas avan√ßados:

        **Bollinger Squeeze Breakout:**
        - Trigger: Bollinger Bandwidth < 10% + pre√ßo rompe banda superior/inferior
        - "MGLU3: Squeeze breakout confirmado - volatilidade expandindo"

        **Volatilidade Extrema Multi-Indicador:**
        - Trigger: ATR > 150% m√©dia AND Beta > 1.5 AND Desvio Padr√£o > percentil 90
        - "AMER3: Volatilidade extrema detectada em m√∫ltiplos indicadores"

        **Revers√£o √† M√©dia:**
        - Trigger: Pre√ßo > 2œÉ acima da Bollinger Band m√©dia + ATR decrescente
        - "ITUB4: Sobrecompra + volatilidade declinando - potencial revers√£o"

  implementation_priority:
    - priority: 1
      metric: "ATR (Average True Range)"
      reason: |
        DEVE SER IMPLEMENTADO PRIMEIRO por ser:
        - A base do tier gratuito
        - Mais simples tecnicamente
        - Requer apenas dados OHLC (j√° necess√°rios para outras features)
        - Fornece valor imediato aos usu√°rios

      technical_notes: |
        Implementa√ß√£o sugerida:
        - Calcular ATR(14) para todos os ativos a cada minuto
        - Armazenar hist√≥rico de 30 dias de ATR para compara√ß√£o
        - Cache in-memory para c√°lculos em tempo real
        - Batch processing noturno para recalcular m√©dias hist√≥ricas

      estimated_effort: "2-3 dias de desenvolvimento"

    - priority: 2
      metric: "Desvio Padr√£o Hist√≥rico"
      reason: |
        Segunda prioridade porque:
        - Complementa ATR no tier gratuito
        - C√°lculo simples (pode reutilizar dados de ATR)
        - Permite compara√ß√£o normalizada entre ativos
        - Dados oficiais da B3 podem ser usados para valida√ß√£o

      technical_notes: |
        Implementa√ß√£o sugerida:
        - Calcular desvio padr√£o m√≥vel de 30 dias
        - Atualizar diariamente no fechamento do mercado
        - Anualizar automaticamente para apresenta√ß√£o
        - Fornecer rank percentual hist√≥rico (ex: "volatilidade no percentil 85")

      estimated_effort: "1-2 dias de desenvolvimento"

    - priority: 3
      metric: "Bollinger Bands"
      reason: |
        Terceira prioridade para tier premium:
        - Requer visualiza√ß√£o gr√°fica para melhor usabilidade
        - Depende de desvio padr√£o j√° implementado (prioridade 2)
        - Adiciona valor significativo para day traders
        - Permite implementar estrat√©gia de Bollinger Squeeze

      technical_notes: |
        Implementa√ß√£o sugerida:
        - Bollinger Bands (20, 2) como padr√£o, com customiza√ß√£o premium
        - Calcular Bollinger %B e Bandwidth
        - Detector de squeeze: Bandwidth < threshold hist√≥rico
        - API para retornar valores das 3 bandas + indicadores derivados

      estimated_effort: "3-4 dias de desenvolvimento"

    - priority: 4
      metric: "Beta vs Ibovespa"
      reason: |
        Quarta prioridade:
        - Feature exclusiva de tier premium
        - Requer dados adicionais (Ibovespa intraday)
        - Menor prioridade para day traders vs swing traders
        - Pode ser desenvolvido incrementalmente

      technical_notes: |
        Implementa√ß√£o sugerida:
        - Calcular Beta rolling de 60 dias (di√°rio)
        - Atualiza√ß√£o di√°ria no p√≥s-mercado
        - Armazenar hist√≥rico para an√°lise de tend√™ncias
        - Fornecer compara√ß√£o setorial (beta m√©dio do setor)

      estimated_effort: "2-3 dias de desenvolvimento"

    - priority: 5
      metric: "Volatilidade Impl√≠cita"
      reason: |
        MENOR PRIORIDADE / OPCIONAL:
        - Requer dados de op√ß√µes (custo adicional de API)
        - Alta complexidade de implementa√ß√£o
        - Aplic√°vel apenas a ativos com op√ß√µes l√≠quidas
        - Pode ser desenvolvido no futuro se houver demanda

      technical_notes: |
        Implementa√ß√£o sugerida (SE implementado):
        - Usar API paga de op√ß√µes (ex: EODHD premium)
        - Implementar solver num√©rico de Black-Scholes
        - Limitar a top 20 ativos com op√ß√µes mais l√≠quidas
        - Atualiza√ß√£o a cada 15 minutos (n√£o tempo real)

      estimated_effort: "5-7 dias de desenvolvimento"
      status: "Considerar apenas ap√≥s valida√ß√£o de demanda do tier premium"

  data_sources:
    free_apis:
      - name: "BrAPI"
        url: "https://brapi.dev/"
        coverage: "B3 (a√ß√µes, FIIs, ETFs)"
        rate_limit: "Varia (verificar documenta√ß√£o atual)"
        real_time: false
        delay: "15-20 minutos"
        data_available: ["OHLCV", "informa√ß√µes fundamentalistas"]
        volatility_metrics: []
        notes: "API brasileira especializada em B3, boa para prot√≥tipo"

      - name: "Alpha Vantage"
        url: "https://www.alphavantage.co/"
        coverage: "Global (inclui B3 via .SAO suffix)"
        rate_limit: "5 calls/minuto, 500 calls/dia (free tier)"
        real_time: false
        delay: "15 minutos"
        data_available: ["OHLCV", "50+ indicadores t√©cnicos", "ATR", "Bollinger Bands pr√©-calculados"]
        volatility_metrics: ["ATR", "Bollinger Bands", "SMA", "EMA"]
        notes: "MELHOR OP√á√ÉO para free tier - ATR e Bollinger j√° calculados"

      - name: "Twelve Data"
        url: "https://twelvedata.com/"
        coverage: "Global (inclui Brasil/B3)"
        rate_limit: "8 calls/minuto, 800 calls/dia (free tier)"
        real_time: false
        delay: "Variable"
        data_available: ["OHLCV", "indicadores t√©cnicos"]
        volatility_metrics: ["ATR", "Bollinger Bands", "Standard Deviation"]
        notes: "Boa alternativa, cobertura de mercados emergentes"

      - name: "Finnhub"
        url: "https://finnhub.io/"
        coverage: "Global"
        rate_limit: "60 calls/minuto (free tier)"
        real_time: false
        data_available: ["OHLCV", "fundamentals", "economic data"]
        volatility_metrics: []
        notes: "Mais focado em fundamentals, limitado para volatilidade"

    paid_apis_future:
      - name: "LSEG B3 Data"
        url: "https://www.lseg.com/en/data-analytics/financial-data/pricing-and-market-data/equities-market-data/b3-data"
        notes: "Dados oficiais B3 via London Stock Exchange Group - considerar para vers√£o enterprise"

      - name: "EODHD (End of Day Historical Data)"
        url: "https://eodhd.com/"
        notes: "Dados hist√≥ricos + op√ß√µes - necess√°rio para volatilidade impl√≠cita"

    official_b3:
      - name: "B3 - Desvio Padr√£o"
        url: "https://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-a-vista/volatilidades-dos-ativos/desvio-padrao/"
        availability: "P√∫blico via site"
        format: "HTML (scraping necess√°rio) ou API paga"
        notes: "Dados oficiais de desvio padr√£o - usar para valida√ß√£o"

  technical_considerations:
    computation:
      atr:
        cpu_cost: "O(n) por ativo, onde n = per√≠odo de lookback (14)"
        memory: "M√≠nimo - apenas √∫ltimos 14 per√≠odos em mem√≥ria"
        scalability: "Excelente - pode processar 100+ ativos em <100ms"

      bollinger_bands:
        cpu_cost: "O(n) para SMA + O(n) para desvio padr√£o = O(2n)"
        memory: "M√©dio - √∫ltimos 20 per√≠odos + desvio padr√£o rolling"
        scalability: "Bom - pode processar 100+ ativos em <200ms"

      beta:
        cpu_cost: "O(n√óm) onde n = per√≠odos do ativo, m = per√≠odos do √≠ndice"
        memory: "M√©dio - hist√≥rico de 60+ dias de ativo + √≠ndice"
        scalability: "Moderado - c√°lculo di√°rio prefer√≠vel a intraday"

      implied_volatility:
        cpu_cost: "O(n√ói) onde n = op√ß√µes, i = itera√ß√µes do solver (10-20)"
        memory: "Alto - requer dados de m√∫ltiplas op√ß√µes + par√¢metros"
        scalability: "Baixo - limitado a poucos ativos"

    storage:
      time_series_data:
        format: "TimescaleDB ou InfluxDB (otimizado para s√©ries temporais)"
        retention: |
          - OHLC raw: 1 ano
          - ATR calculado: 90 dias
          - Bollinger Bands: 90 dias
          - Beta: 6 meses
        compression: "Compress√£o nativa de time-series DB (5-10x)"

      cache_strategy:
        redis_structure: |
          Key: "atr:PETR4:14:1m" ‚Üí Value: {timestamp, atr_value, tr_current}
          Key: "bb:VALE3:20:2:1h" ‚Üí Value: {timestamp, upper, middle, lower, bandwidth}
        ttl: "60 segundos para intraday, 1 dia para di√°rio"

    api_design:
      endpoints:
        - path: "/api/v1/volatility/{symbol}/atr"
          params: "?period=14&interval=1m"
          response: |
            {
              "symbol": "PETR4",
              "atr": 0.85,
              "atr_percent": 2.1,
              "avg_atr_20d": 0.65,
              "percentile": 75,
              "timestamp": "2026-01-17T14:30:00Z"
            }

        - path: "/api/v1/volatility/{symbol}/bollinger"
          params: "?period=20&std_dev=2&interval=1h"
          response: |
            {
              "symbol": "VALE3",
              "upper_band": 68.50,
              "middle_band": 65.00,
              "lower_band": 61.50,
              "current_price": 66.80,
              "percent_b": 0.76,
              "bandwidth": 10.8,
              "is_squeeze": false,
              "timestamp": "2026-01-17T14:00:00Z"
            }

        - path: "/api/v1/volatility/{symbol}/beta"
          params: "?index=IBOV&period=60"
          response: |
            {
              "symbol": "MGLU3",
              "beta": 1.45,
              "r_squared": 0.72,
              "index": "IBOV",
              "period_days": 60,
              "interpretation": "aggressive",
              "timestamp": "2026-01-17T00:00:00Z"
            }

  user_education:
    free_tier_messaging: |
      Para usu√°rios do tier gratuito, explicar em linguagem simples:

      **ATR (Volatilidade M√©dia):**
      "O ATR mostra quanto, em reais, uma a√ß√£o costuma variar por dia.
      Exemplo: PETR4 com ATR de R$ 0.85 significa que em m√©dia a a√ß√£o
      oscila R$ 0.85 entre m√°xima e m√≠nima di√°ria."

      **Desvio Padr√£o:**
      "Mede o quanto o pre√ßo varia em rela√ß√£o √† m√©dia. Quanto maior o
      desvio padr√£o, mais 'nervosa' est√° a a√ß√£o."

      **Alertas:**
      - üî¥ Alta Volatilidade: Aten√ß√£o! Maior risco e oportunidade
      - üü¢ Baixa Volatilidade: Mercado calmo, potencial de movimento forte em breve

    premium_tier_messaging: |
      Para usu√°rios premium, fornecer insights avan√ßados:

      **Bollinger Squeeze:**
      "Quando as bandas se estreitam muito, historicamente seguem-se
      movimentos fortes. N√£o sabemos a dire√ß√£o, mas sabemos que vem a√≠."

      **Beta:**
      "Beta de 1.5 significa que se o Ibovespa subir 1%, esta a√ß√£o tende
      a subir 1.5%. √ötil para entender risco em rela√ß√£o ao mercado."

      **M√∫ltiplos Timeframes:**
      "An√°lise simult√¢nea de volatilidade em 5min, 1h e di√°rio identifica
      padr√µes que um √∫nico timeframe pode perder."

  knowledge_gaps:
    - "Qual a lat√™ncia real das APIs gratuitas para dados da B3 em 2026?"
    - "Alpha Vantage free tier suporta suficiente rate limit para 50+ ativos em tempo real?"
    - "Qual o custo exato de dados de op√ß√µes da B3 para c√°lculo de vol impl√≠cita?"
    - "Existe √≠ndice IVol-BR dispon√≠vel gratuitamente ou apenas via B3 paga?"
    - "Qual o threshold ideal de Bollinger Squeeze para ativos brasileiros (vs americanos)?"

  next_steps:
    - action: "Testar Alpha Vantage API com s√≠mbolos B3 (.SAO suffix)"
      owner: "backend-dev"
      priority: "high"
      estimated_time: "4 horas"

    - action: "Implementar c√°lculo de ATR(14) para single asset (POC)"
      owner: "backend-dev"
      priority: "high"
      estimated_time: "8 horas"

    - action: "Definir thresholds de alertas (percentis hist√≥ricos)"
      owner: "data-analyst"
      priority: "medium"
      estimated_time: "1 dia"

    - action: "Validar c√°lculos contra dados oficiais da B3"
      owner: "qa"
      priority: "high"
      estimated_time: "1 dia"

    - action: "Projetar schema TimescaleDB para time-series de volatilidade"
      owner: "backend-dev"
      priority: "medium"
      estimated_time: "4 horas"

    - action: "Criar wireframes de alertas de volatilidade (mobile + web)"
      owner: "product-designer"
      priority: "medium"
      estimated_time: "1 dia"

  references:
    academic:
      - title: "Avaliando a Volatilidade Di√°ria dos Ativos"
        url: "https://www.bcb.gov.br/pec/wps/port/wps297.pdf"
        type: "working_paper"
        institution: "Banco Central do Brasil"

      - title: "C√°lculo da volatilidade impl√≠cita sem o uso de modelos de precifica√ß√£o"
        url: "http://s3.amazonaws.com/public-cdn.ibmec.br/portalibmec-content/public/arquivos/df/dis_2013_1_-_ana_luisa_de_souza_villas_boas_gomes.pdf"
        type: "dissertation"
        institution: "IBMEC"

    industry:
      - title: "ATR vs Bollinger Bands: Unlocking the Secrets of Market Volatility"
        url: "https://algogene.com/community/post/310"
        type: "comparative_analysis"

      - title: "Volatility Analysis: Combining Bollinger Bands¬Æ and Average True Ranges"
        url: "https://www.traderslog.com/volatility-analysis"
        type: "strategy_guide"

    official:
      - title: "B3 - Desvio Padr√£o"
        url: "https://www.b3.com.br/pt_br/market-data-e-indices/servicos-de-dados/market-data/consultas/mercado-a-vista/volatilidades-dos-ativos/desvio-padrao/"
        type: "exchange_official"

      - title: "Hist√≥rico de volatilidade impl√≠cita das op√ß√µes B3"
        url: "https://opcoes.net.br/historico/volatilidade-implicita"
        type: "market_data"

corpus_additions:
  - type: "research_brief"
    title: "Volatility Metrics for B3 Real-Time Alert System"
    content: "Comprehensive analysis of 6 volatility metrics with implementation recommendations"
    tags: ["volatility", "B3", "trading", "metrics", "ATR", "Bollinger Bands"]
    phase: 1
    project_id: "proj-75602fb4"
